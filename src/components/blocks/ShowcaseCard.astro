---
import { MagicCard } from "@/components/ui/magic-card";
import { Badge } from "@/components/ui/badge";
import { Button } from "@/components/ui/button";

interface ShowcaseCardProps {
  id: number;
  title: string;
  description: string;
  imageUrl: string;
  status: "In Production" | "Testing" | "Maintenance" | "Quality Control" | "On Demand" | "Jobwork" | "Design Phase"; // Add all possible statuses
  Qty?: number;
  rate?: number;
}
const { id, title, description, imageUrl, status, Qty, rate } = Astro.props as ShowcaseCardProps;

const statusStyles: Record<ShowcaseCardProps['status'], { bg: string; glow: string }> = {
  "On Demand": {
    bg: "bg-lime-100 text-lime-800",
    glow: "bg-lime-800",
  },
  "Design Phase": {
    bg: "bg-orange-100 text-orange-800",
    glow: "bg-orange-800",
  },
  "In Production": {
    bg: "bg-green-100 text-green-800",
    glow: "bg-green-800",
  },
  "Testing": {
    bg: "bg-blue-100 text-blue-800",
    glow: "bg-blue-800",
  },
  "Maintenance": {
    bg: "bg-red-100 text-red-800",
    glow: "bg-red-800",
  },
  "Jobwork": {
    bg: "bg-neutral-100 text-neutral-800",
    glow: "bg-neutral-800",
  },
  "Quality Control": {
    bg: "bg-purple-100 text-purple-800",
    glow: "bg-purple-800",
  },
} as const;
---

<MagicCard
  imageUrl={imageUrl}
  className="relative p-4 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow duration-300 flex flex-col"
>
  <!-- Project Title -->
  <h3 class="text-sm font-semibold text-gray-900 mb-2">{title}</h3>

  <!-- Project Description -->
  <p class="text-xs text-gray-600 mb-4">{description}</p>

  <!-- Qty, Rate, and Order Now Button Aligned Horizontally -->
  <div class="mt-auto flex items-center justify-between">
    <div class="flex space-x-4">
      <p class="text-xs text-gray-600">
        <strong>Qty:</strong>
        {Qty !== undefined ? Qty : "N/A"}
      </p>
      <p class="text-xs text-gray-600">
        <strong>Rate:</strong> â‚¹{rate !== undefined ? rate : "N/A"}
      </p>
    </div>
    <Button variant="outline" size="sm" className="mt-2">Get Quote Now</Button>
  </div>
  <!-- Status Badge Positioned at Lower Left -->
  <Badge className={`inline-flex items-center gap-1 px-2 py-1 rounded-full ${statusStyles[status].bg}`}>
    {status}
    <span class={`inline-block w-2 h-2 rounded-full ${statusStyles[status].glow} animate-ping`}></span>
  </Badge>
  <!-- View Details Link Positioned at Lower Right -->
  <div class="flex justify-end">
    <a href={`/projects/${id}`} class="text-blue-500 hover:underline text-xs"
      >View Details</a
    >
  </div>
</MagicCard>
